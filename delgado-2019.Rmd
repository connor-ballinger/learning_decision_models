---
title: "Title"
date: "`r conr::format_date()`"
author: "Connor Ballinger"
knit: conr::write_and_date
output: conr::format_html
---

```{r, warning=FALSE, message=FALSE}
# knitr::opts_chunk$set()

library(here)
library(tidyverse)
library(knitr)
library(hesim)
library(data.table)

registerS3method("knit_print", "data.frame", conr::knit_print.data.frame)

# theme_set(theme_bw() + theme(legend.position = "bottom"))

```

-   Epithelial OC (90% of OC is used)

-   3-state Markov (stable, progressed, death), stratified by the 4 stages. 

-   10-year horizon, societal perspective.

-   “The cycle length used was 3 weeks (21 days), which is the length of a chemotherapy cycle. Patients entered the model after they were diagnosed with EOC in the stable state. A cycle after, they can either remain stable, become worse, and move to a post-progression state, or die. Those who progress remain in a post-progression state until they die.” 

-   Used Heintz 2006 for survival. Heintz only provided 5-year survival data – Delgado extrapolated based on exponential distribution?

# Model Structure

```{r}
states <- data.table(state_id = 1:2,
                     state = c("Stable", "Progressed"))

stage <- data.table(stage_id = 1:4,
                    stage = c("I", "II", "III", "IV"))

mean_ages <- c(57.4, 62.4, 64.9, 68.1)

median_pfs <- c(18.33, 6.25, 2.00, 1.60)
median_os <- c(19.50, 7.50, 3.20, 1.90)

lambda_pfs <- - ln(0.5) / median_pfs
p_pp <- 1 - exp(-lambda_pfs * time)

lambda_os <- - ln(0.5) / (median_os - median_pfs)
p_d <- 1 - exp(-lambda_os * time)
```

